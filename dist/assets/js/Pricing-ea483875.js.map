{"version":3,"file":"Pricing-ea483875.js","sources":["../../../src/views/Pricing.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport { useUserAccess } from '../hooks/useUserAccess';\nimport { createCheckoutSession } from '../services/stripeService';\nimport { Check, Star, Zap, Crown, User } from 'lucide-react';\n\ninterface PricingPlan {\n  id: string;\n  name: string;\n  price: string;\n  originalPrice?: string;\n  interval: 'monthly' | 'yearly';\n  features: string[];\n  popular?: boolean;\n  earlyAdopter?: boolean;\n  priceId: string;\n}\n\nconst plans: PricingPlan[] = [\n  {\n    id: 'free',\n    name: 'Free Creator',\n    price: '$0',\n    interval: 'monthly',\n    features: [\n      '3 track uploads per month',\n      'Basic saved sessions',\n      'Access to 10 rotating curated library tracks',\n      'Community support',\n      'Basic measure detection',\n      'Standard audio tools'\n    ],\n    priceId: ''\n  },\n  {\n    id: import.meta.env.VITE_STRIPE_MODE === 'live' \n      ? import.meta.env.VITE_STRIPE_LIVE_PRODUCT_MONTHLY \n      : import.meta.env.VITE_STRIPE_TEST_PRODUCT_MONTHLY,\n    name: 'Pro Creator Monthly',\n    price: '$8',\n    interval: 'monthly',\n    features: [\n      'Unlimited track uploads',\n      'Unlimited saved sessions',\n      'Unlimited curated library tracks',\n      'Download your recordings',\n      'AI-powered tagging (coming soon)',\n      'Advanced loop detection (coming soon)',\n      'Audio export tools (coming soon)',\n      'Priority support & early features'\n    ],\n    priceId: import.meta.env.VITE_STRIPE_MODE === 'live' \n      ? import.meta.env.VITE_STRIPE_LIVE_PRICE_MONTHLY \n      : import.meta.env.VITE_STRIPE_TEST_PRICE_MONTHLY\n  },\n  {\n    id: import.meta.env.VITE_STRIPE_MODE === 'live' \n      ? import.meta.env.VITE_STRIPE_LIVE_PRODUCT_YEARLY \n      : import.meta.env.VITE_STRIPE_TEST_PRODUCT_YEARLY,\n    name: 'Pro Creator Yearly',\n    price: '$72',\n    originalPrice: '$96',\n    interval: 'yearly',\n    features: [\n      'Everything in Monthly plan',\n      '25% discount vs monthly',\n      'Early access to new features',\n      'Creator dashboard (coming soon)',\n      'Monetization tools (coming soon)'\n    ],\n    popular: true,\n    priceId: import.meta.env.VITE_STRIPE_MODE === 'live' \n      ? import.meta.env.VITE_STRIPE_LIVE_PRICE_YEARLY \n      : import.meta.env.VITE_STRIPE_TEST_PRICE_YEARLY\n  },\n  {\n    id: import.meta.env.VITE_STRIPE_MODE === 'live' \n      ? import.meta.env.VITE_STRIPE_LIVE_PRODUCT_EARLY_ADOPTER \n      : import.meta.env.VITE_STRIPE_TEST_PRODUCT_EARLY_ADOPTER,\n    name: 'Early Adopter Promo',\n    price: '$64',\n    originalPrice: '$96',\n    interval: 'yearly',\n    features: [\n      'Full Pro Creator access',\n      'Limited time pricing',\n      'Lifetime early access to new features',\n      'Direct input on product roadmap',\n      'Special early adopter badge'\n    ],\n    earlyAdopter: true,\n    priceId: import.meta.env.VITE_STRIPE_MODE === 'live' \n      ? import.meta.env.VITE_STRIPE_LIVE_PRICE_EARLY_ADOPTER \n      : import.meta.env.VITE_STRIPE_TEST_PRICE_EARLY_ADOPTER\n  }\n];\n\nexport const Pricing: React.FC = () => {\n  const { user } = useAuth();\n  const { accessTier, loading: accessLoading } = useUserAccess();\n  const [loading, setLoading] = useState<string | null>(null);\n\n  const handleSubscribe = async (plan: PricingPlan) => {\n    if (!user) {\n      // For anonymous users, redirect to signup\n      window.location.href = '/auth?redirect=pricing';\n      return;\n    }\n\n    // Don't allow subscribing to free plan if already on it\n    if (plan.id === 'free' && accessTier === 'free') {\n      return;\n    }\n\n    setLoading(plan.id);\n    try {\n      const { url, error } = await createCheckoutSession(plan.priceId);\n      if (error) {\n        console.error('Checkout error:', error);\n        alert('Failed to create checkout session. Please try again.');\n        return;\n      }\n      \n      if (url) {\n        window.location.href = url;\n      }\n    } catch (error) {\n      console.error('Subscription error:', error);\n      alert('Something went wrong. Please try again.');\n    } finally {\n      setLoading(null);\n    }\n  };\n\n  const getCurrentPlan = () => {\n    if (!user) return null;\n    if (accessTier === 'pro') {\n      return plans.find(plan => plan.id !== 'free' && plan.interval === 'yearly') || plans[1]; // Default to yearly pro\n    }\n    return plans[0]; // Free plan\n  };\n\n  const currentPlan = getCurrentPlan();\n\n  if (accessLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  // If user is already pro, show upgrade message\n  if (user && accessTier === 'pro') {\n    return (\n      <div className=\"max-w-3xl mx-auto py-12 px-4 sm:px-6 lg:px-8\">\n        <div className=\"text-center\">\n          <div className=\"audafact-card-enhanced p-8\">\n            <div className=\"flex justify-center mb-6\">\n              <div className=\"bg-audafact-accent-green bg-opacity-20 p-3 rounded-full\">\n                <Check className=\"h-8 w-8 text-audafact-accent-green\" />\n              </div>\n            </div>\n            <h1 className=\"text-3xl font-bold audafact-heading mb-4\">\n              You're already a Pro Creator!\n            </h1>\n            <p className=\"text-lg audafact-text-secondary mb-8\">\n              You have access to all premium features. Enjoy creating amazing music!\n            </p>\n            <a\n              href=\"/studio\"\n              className=\"audafact-button-primary\"\n            >\n              Go to Studio\n            </a>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8\">\n      {/* Header */}\n      <div className=\"text-center mb-12\">\n        <h1 className=\"text-5xl font-bold audafact-heading mb-6\">\n          Choose Your Creator Plan\n        </h1>\n        <p className=\"text-xl audafact-text-secondary max-w-2xl mx-auto\">\n          Start free and upgrade when you're ready. All plans include access to our curated audio library \n          and powerful music creation tools.\n        </p>\n        {!user && (\n          <div className=\"mt-6\">\n            <p className=\"text-sm audafact-text-secondary mb-3\">\n              Already have an account? \n              <a href=\"/auth\" className=\"text-audafact-accent-cyan hover:underline ml-1\">\n                Sign in here\n              </a>\n            </p>\n          </div>\n        )}\n      </div>\n\n        {/* Plans Grid */}\n        <div className=\"grid md:grid-cols-4 gap-6 max-w-7xl mx-auto\">\n          {plans.map((plan) => {\n            const isCurrentPlan = currentPlan?.id === plan.id;\n            const isFreePlan = plan.id === 'free';\n            \n            return (\n              <div\n                key={plan.id}\n                className={`relative audafact-card-enhanced audafact-card-hover p-6 transition-all duration-200 ${\n                  plan.popular ? 'ring-2 ring-audafact-accent-blue scale-105' : ''\n                } ${isCurrentPlan ? 'ring-2 ring-audafact-accent-green' : ''}`}\n              >\n                {/* Current Plan Badge */}\n                {isCurrentPlan && (\n                  <div className=\"absolute -top-3 left-1/2 transform -translate-x-1/2\">\n                    <span className=\"bg-audafact-accent-green text-audafact-bg-primary px-3 py-1 rounded-full text-xs font-semibold flex items-center\">\n                      <User className=\"h-3 w-3 mr-1\" />\n                      Current Plan\n                    </span>\n                  </div>\n                )}\n\n                {/* Popular Badge */}\n                {plan.popular && !isCurrentPlan && (\n                  <div className=\"absolute -top-3 left-1/2 transform -translate-x-1/2\">\n                    <span className=\"bg-audafact-accent-blue text-audafact-text-primary px-3 py-1 rounded-full text-xs font-semibold flex items-center\">\n                      <Star className=\"h-3 w-3 mr-1\" />\n                      Most Popular\n                    </span>\n                  </div>\n                )}\n\n                {/* Early Adopter Badge */}\n                {plan.earlyAdopter && !isCurrentPlan && (\n                  <div className=\"absolute -top-3 left-1/2 transform -translate-x-1/2\">\n                    <span className=\"bg-audafact-accent-cyan text-audafact-bg-primary px-3 py-1 rounded-full text-xs font-semibold flex items-center\">\n                      <Zap className=\"h-3 w-3 mr-1\" />\n                      Limited Time\n                    </span>\n                  </div>\n                )}\n\n                {/* Plan Header */}\n                <div className=\"text-center mb-6\">\n                  <div className=\"flex items-center justify-center mb-3\">\n                    {plan.popular && <Crown className=\"h-5 w-5 text-audafact-accent-cyan mr-2\" />}\n                    <h3 className=\"text-xl font-bold audafact-heading\">{plan.name}</h3>\n                  </div>\n                  \n                  <div className=\"mb-3\">\n                    <span className=\"text-3xl font-bold audafact-heading\">{plan.price}</span>\n                    {!isFreePlan && (\n                      <span className=\"audafact-text-secondary\">/{plan.interval === 'monthly' ? 'month' : 'year'}</span>\n                    )}\n                  </div>\n                  \n                  {plan.originalPrice && (\n                    <div className=\"text-sm audafact-text-secondary\">\n                      <span className=\"line-through\">{plan.originalPrice}</span>\n                      <span className=\"text-audafact-accent-green font-semibold ml-2\">\n                        Save ${parseInt(plan.originalPrice.replace('$', '')) - parseInt(plan.price.replace('$', ''))}\n                      </span>\n                    </div>\n                  )}\n                </div>\n\n                {/* Features */}\n                <ul className=\"space-y-3 mb-6\">\n                  {plan.features.map((feature, index) => (\n                    <li key={index} className=\"flex items-start\">\n                      <Check className=\"h-4 w-4 text-audafact-accent-green mr-2 mt-0.5 flex-shrink-0\" />\n                      <span className=\"audafact-text-secondary text-sm\">{feature}</span>\n                    </li>\n                  ))}\n                </ul>\n\n                {/* CTA Button */}\n                <button\n                  onClick={() => handleSubscribe(plan)}\n                  disabled={loading === plan.id || isCurrentPlan}\n                  className={`w-full py-2 px-4 rounded-lg font-semibold transition-all duration-200 text-sm ${\n                    isCurrentPlan\n                      ? 'bg-audafact-accent-green text-audafact-bg-primary cursor-default'\n                      : plan.popular\n                      ? 'audafact-button-primary'\n                      : plan.earlyAdopter\n                      ? 'bg-audafact-accent-cyan text-audafact-bg-primary hover:bg-opacity-90'\n                      : isFreePlan\n                      ? 'audafact-button-secondary'\n                      : 'audafact-button-secondary'\n                  } disabled:opacity-50 disabled:cursor-not-allowed`}\n                >\n                  {loading === plan.id ? (\n                    <div className=\"flex items-center justify-center\">\n                      <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                      Processing...\n                    </div>\n                  ) : isCurrentPlan ? (\n                    'Current Plan'\n                  ) : !user ? (\n                    'Sign Up'\n                  ) : isFreePlan ? (\n                    'Get Started'\n                  ) : (\n                    `Get ${plan.name}`\n                  )}\n                </button>\n              </div>\n            );\n          })}\n        </div>\n\n        {/* FAQ Section */}\n        <div className=\"mt-16 max-w-4xl mx-auto\">\n          <h2 className=\"text-3xl font-bold text-center audafact-heading mb-8\">\n            Frequently Asked Questions\n          </h2>\n          <div className=\"grid md:grid-cols-2 gap-8\">\n            <div className=\"audafact-card p-6\">\n              <h3 className=\"text-lg font-semibold audafact-heading mb-2\">\n                Can I cancel anytime?\n              </h3>\n              <p className=\"audafact-text-secondary\">\n                Yes, you can cancel your subscription at any time. You'll continue to have access until the end of your billing period.\n              </p>\n            </div>\n            <div className=\"audafact-card p-6\">\n              <h3 className=\"text-lg font-semibold audafact-heading mb-2\">\n                What payment methods do you accept?\n              </h3>\n              <p className=\"audafact-text-secondary\">\n                We accept all major credit cards, debit cards, and digital wallets through our secure Stripe integration.\n              </p>\n            </div>\n            <div className=\"audafact-card p-6\">\n              <h3 className=\"text-lg font-semibold audafact-heading mb-2\">\n                Is there a free plan?\n              </h3>\n              <p className=\"audafact-text-secondary\">\n                Yes! We offer a free tier with 3 track uploads per month and basic features. \n                Perfect for getting started with music creation.\n              </p>\n            </div>\n            <div className=\"audafact-card p-6\">\n              <h3 className=\"text-lg font-semibold audafact-heading mb-2\">\n                Can I change my plan later?\n              </h3>\n              <p className=\"audafact-text-secondary\">\n                Yes, you can upgrade or downgrade your plan at any time. Changes will be reflected in your next billing cycle.\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n  );\n}; "],"names":["plans","id","name","price","interval","features","priceId","originalPrice","popular","earlyAdopter","Pricing","user","useAuth","accessTier","loading","accessLoading","useUserAccess","setLoading","useState","currentPlan","find","plan","jsx","className","children","jsxs","Check","href","map","isCurrentPlan","isFreePlan","User","Star","Zap","Crown","parseInt","replace","feature","index","onClick","async","url","error","createCheckoutSession","alert","window","location","handleSubscribe","disabled"],"mappings":"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"}