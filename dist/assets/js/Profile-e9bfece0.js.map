{"version":3,"file":"Profile-e9bfece0.js","sources":["../../../src/components/SubscriptionManager.tsx","../../../src/views/Profile.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useUserAccess } from '../hooks/useUserAccess';\nimport { createCustomerPortalSession, cancelSubscription } from '../services/stripeService';\nimport { CreditCard, Calendar, AlertTriangle, CheckCircle, Settings } from 'lucide-react';\n\nexport const SubscriptionManager: React.FC = () => {\n  const { accessTier, subscriptionId, planInterval, loading } = useUserAccess();\n  const [portalLoading, setPortalLoading] = useState(false);\n  const [cancelLoading, setCancelLoading] = useState(false);\n\n  const handleManageBilling = async () => {\n    setPortalLoading(true);\n    try {\n      const { url, error } = await createCustomerPortalSession();\n      if (error) {\n        alert(`Error: ${error}`);\n        return;\n      }\n      if (url) {\n        window.location.href = url;\n      }\n    } catch (error) {\n      console.error('Portal session error:', error);\n      alert('Failed to open billing portal');\n    } finally {\n      setPortalLoading(false);\n    }\n  };\n\n  const handleCancelSubscription = async () => {\n    if (!confirm('Are you sure you want to cancel your subscription? You will lose access to Pro features at the end of your current billing period.')) {\n      return;\n    }\n\n    setCancelLoading(true);\n    try {\n      const { success, error } = await cancelSubscription();\n      if (error) {\n        alert(`Error: ${error}`);\n        return;\n      }\n      if (success) {\n        alert('Your subscription has been canceled. You will have access until the end of your billing period.');\n        window.location.reload();\n      }\n    } catch (error) {\n      console.error('Cancel subscription error:', error);\n      alert('Failed to cancel subscription');\n    } finally {\n      setCancelLoading(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center p-8\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  if (accessTier !== 'pro') {\n    return (\n      <div className=\"audafact-card p-6\">\n        <div className=\"text-center\">\n          <AlertTriangle className=\"h-12 w-12 text-audafact-accent-cyan mx-auto mb-4\" />\n          <h3 className=\"text-lg font-semibold audafact-heading mb-2\">\n            Free Plan Active\n          </h3>\n          <p className=\"audafact-text-secondary mb-4\">\n            You're currently on the free plan. Upgrade to Pro Creator to unlock all features.\n          </p>\n          <a\n            href=\"/pricing\"\n            className=\"audafact-button-primary\"\n          >\n            Upgrade to Pro\n          </a>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"audafact-card p-6\">\n      <div className=\"flex items-center justify-between mb-6\">\n        <div className=\"flex items-center\">\n          <CheckCircle className=\"h-8 w-8 text-audafact-accent-green mr-3\" />\n          <div>\n            <h3 className=\"text-lg font-semibold audafact-heading\">\n              Pro Creator Plan\n            </h3>\n            <p className=\"text-sm audafact-text-secondary\">\n              {planInterval === 'monthly' ? 'Monthly billing' : 'Annual billing'}\n            </p>\n          </div>\n        </div>\n        <div className=\"text-right\">\n          <div className=\"text-2xl font-bold audafact-heading\">\n            {planInterval === 'monthly' ? '$8' : '$72'}\n          </div>\n          <div className=\"text-sm audafact-text-secondary\">\n            per {planInterval === 'monthly' ? 'month' : 'year'}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"space-y-4 mb-6\">\n        <div className=\"flex items-center text-sm audafact-text-secondary\">\n          <CreditCard className=\"h-4 w-4 mr-2\" />\n          <span>Subscription ID: {subscriptionId?.slice(-8) || 'N/A'}</span>\n        </div>\n        <div className=\"flex items-center text-sm audafact-text-secondary\">\n          <Calendar className=\"h-4 w-4 mr-2\" />\n          <span>Billing Cycle: {planInterval === 'monthly' ? 'Monthly' : 'Annual'}</span>\n        </div>\n      </div>\n\n      <div className=\"flex space-x-3\">\n        <button\n          onClick={handleManageBilling}\n          disabled={portalLoading}\n          className=\"flex-1 flex items-center justify-center px-4 py-2 border border-audafact-divider rounded-md shadow-sm text-sm font-medium audafact-text-secondary bg-audafact-surface-2 hover:bg-audafact-divider focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-audafact-accent-blue disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n        >\n          {portalLoading ? (\n            <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-audafact-text-secondary mr-2\"></div>\n          ) : (\n            <Settings className=\"h-4 w-4 mr-2\" />\n          )}\n          Manage Billing\n        </button>\n        \n        <button\n          onClick={handleCancelSubscription}\n          disabled={cancelLoading}\n          className=\"flex-1 flex items-center justify-center px-4 py-2 border border-audafact-alert-red rounded-md shadow-sm text-sm font-medium text-audafact-alert-red bg-audafact-surface-2 hover:bg-audafact-alert-red hover:bg-opacity-10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-audafact-alert-red disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n        >\n          {cancelLoading ? (\n            <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-audafact-alert-red mr-2\"></div>\n          ) : (\n            <AlertTriangle className=\"h-4 w-4 mr-2\" />\n          )}\n          Cancel Subscription\n        </button>\n      </div>\n\n      <div className=\"mt-4 p-4 bg-audafact-accent-blue bg-opacity-10 rounded-md border border-audafact-accent-blue border-opacity-20\">\n        <div className=\"flex\">\n          <div className=\"flex-shrink-0\">\n            <AlertTriangle className=\"h-5 w-5 text-audafact-accent-blue\" />\n          </div>\n          <div className=\"ml-3\">\n            <h3 className=\"text-sm font-medium audafact-heading\">\n              Need help?\n            </h3>\n            <div className=\"mt-2 text-sm audafact-text-secondary\">\n              <p>\n                Contact our support team if you have any questions about your subscription or billing.\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}; ","import React from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport { SubscriptionManager } from '../components/SubscriptionManager';\nimport { User, Settings, CreditCard, Shield } from 'lucide-react';\n\nexport const Profile: React.FC = () => {\n  const { user } = useAuth();\n\n  if (!user) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h1 className=\"text-2xl font-bold audafact-heading mb-4\">\n            Please sign in to view your profile\n          </h1>\n          <a\n            href=\"/auth\"\n            className=\"audafact-button-primary\"\n          >\n            Sign In\n          </a>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-4xl mx-auto py-12 px-4 sm:px-6 lg:px-8\">\n      {/* Header */}\n      <div className=\"mb-8\">\n        <h1 className=\"text-3xl font-bold audafact-heading mb-2\">Profile</h1>\n        <p className=\"audafact-text-secondary\">Manage your account and subscription</p>\n      </div>\n\n        <div className=\"grid lg:grid-cols-3 gap-8\">\n          {/* User Info */}\n          <div className=\"lg:col-span-1\">\n            <div className=\"audafact-card-enhanced p-6\">\n              <div className=\"flex items-center mb-6\">\n                <div className=\"bg-audafact-accent-blue bg-opacity-20 p-3 rounded-full mr-4\">\n                  <User className=\"h-8 w-8 text-audafact-accent-blue\" />\n                </div>\n                <div>\n                  <h2 className=\"text-xl font-semibold audafact-heading\">Account Info</h2>\n                  <p className=\"audafact-text-secondary\">Your personal information</p>\n                </div>\n              </div>\n\n              <div className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium audafact-text-secondary mb-1\">\n                    Email\n                  </label>\n                  <p className=\"audafact-heading\">{user.email}</p>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium audafact-text-secondary mb-1\">\n                    User ID\n                  </label>\n                  <p className=\"text-sm audafact-text-secondary font-mono\">\n                    {user.id.slice(0, 8)}...\n                  </p>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium audafact-text-secondary mb-1\">\n                    Member Since\n                  </label>\n                  <p className=\"audafact-heading\">\n                    {new Date(user.created_at).toLocaleDateString()}\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            {/* Quick Actions */}\n            <div className=\"audafact-card-enhanced p-6 mt-6\">\n              <h3 className=\"text-lg font-semibold audafact-heading mb-4\">Quick Actions</h3>\n              <div className=\"space-y-3\">\n                <a\n                  href=\"/studio\"\n                  className=\"flex items-center p-3 audafact-text-secondary hover:bg-audafact-surface-2 rounded-lg transition-colors\"\n                >\n                  <Settings className=\"h-5 w-5 mr-3 text-audafact-text-secondary\" />\n                  <span>Go to Studio</span>\n                </a>\n                <a\n                  href=\"/pricing\"\n                  className=\"flex items-center p-3 audafact-text-secondary hover:bg-audafact-surface-2 rounded-lg transition-colors\"\n                >\n                  <CreditCard className=\"h-5 w-5 mr-3 text-audafact-text-secondary\" />\n                  <span>View Plans</span>\n                </a>\n              </div>\n            </div>\n          </div>\n\n          {/* Subscription Management */}\n          <div className=\"lg:col-span-2\">\n            <div className=\"audafact-card-enhanced p-6\">\n              <div className=\"flex items-center mb-6\">\n                <div className=\"bg-audafact-accent-green bg-opacity-20 p-3 rounded-full mr-4\">\n                  <Shield className=\"h-8 w-8 text-audafact-accent-green\" />\n                </div>\n                <div>\n                  <h2 className=\"text-xl font-semibold audafact-heading\">Subscription</h2>\n                  <p className=\"audafact-text-secondary\">Manage your billing and plan</p>\n                </div>\n              </div>\n\n              <SubscriptionManager />\n            </div>\n\n            {/* Account Security */}\n            <div className=\"audafact-card-enhanced p-6 mt-6\">\n              <h3 className=\"text-lg font-semibold audafact-heading mb-4\">Security</h3>\n              <div className=\"space-y-4\">\n                <div className=\"flex items-center justify-between p-4 border border-audafact-divider rounded-lg\">\n                  <div>\n                    <h4 className=\"font-medium audafact-heading\">Password</h4>\n                    <p className=\"text-sm audafact-text-secondary\">Last changed: Unknown</p>\n                  </div>\n                  <button className=\"text-audafact-accent-blue hover:text-opacity-80 text-sm font-medium transition-colors\">\n                    Change Password\n                  </button>\n                </div>\n\n                <div className=\"flex items-center justify-between p-4 border border-audafact-divider rounded-lg\">\n                  <div>\n                    <h4 className=\"font-medium audafact-heading\">Two-Factor Authentication</h4>\n                    <p className=\"text-sm audafact-text-secondary\">Add an extra layer of security</p>\n                  </div>\n                  <button className=\"text-audafact-accent-blue hover:text-opacity-80 text-sm font-medium transition-colors\">\n                    Enable 2FA\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n  );\n}; "],"names":["SubscriptionManager","accessTier","subscriptionId","planInterval","loading","useUserAccess","portalLoading","setPortalLoading","useState","cancelLoading","setCancelLoading","jsx","className","children","jsxs","AlertTriangle","href","CheckCircle","CreditCard","slice","Calendar","onClick","async","url","error","createCustomerPortalSession","alert","window","location","disabled","Settings","confirm","success","cancelSubscription","reload","Profile","user","useAuth","User","email","id","Date","created_at","toLocaleDateString","Shield"],"mappings":"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"}